<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>You Are The Light</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #000;
  color: #fff;
  font-family: Arial, Helvetica, sans-serif;
  overflow: hidden;
}

/* CENTER EVERYTHING */
.center {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  height: 100%;
}

/* BUTTONS */
button {
  margin-top: 20px;
  padding: 16px 28px;
  font-size: 18px;
  background: #fff;
  color: #000;
  border: none;
  cursor: pointer;
}

/* STOP BUTTON */
#stop {
  position: fixed;
  top: 16px;
  right: 16px;
  font-size: 16px;
  opacity: 0.7;
}
</style>
</head>

<body>

<div id="app" class="center">
  <h1>YOU ARE CONNECTED</h1>
  <p>
    The light will activate with the music.<br>
    Keep your phone visible.
  </p>
</div>

<script>
/* ========= CONFIG ========= */
const BPM = 120;
const interval = 60000 / BPM;
const words = ["REGARDE", "JE TE VOIS", "OBÉIS", "DÉSIRE", "MONTRE-TOI"];
/* ========================== */

const params = new URLSearchParams(window.location.search);
const isControl = params.get("control");

let pulseInterval = null;
let flash = false;

// CONTROL MODE
if (isControl) {
  document.body.innerHTML = `
    <div class="center">
      <button onclick="start()">START MUSIC</button>
      <button onclick="stop()">STOP</button>
    </div>
  `;
}

// START PULSE
function start() {
  document.getElementById("app")?.remove();

  pulseInterval = setInterval(() => {
    flash = !flash;
    document.body.style.background = flash ? "#f2f2f2" : "#111";
  }, interval);
}

// STOP PULSE
function stop() {
  clearInterval(pulseInterval);
  document.body.style.background = "#000";
}
</script>

</body>
</html>
